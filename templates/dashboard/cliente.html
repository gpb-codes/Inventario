{% extends "base.html" %}
{% block content %}

<!-- Encabezado -->
<div class="bg-purple-600/40 backdrop-blur-md rounded-xl shadow-md py-6 mb-10">
  <h1 class="text-3xl font-extrabold text-white text-center flex items-center justify-center gap-2">
    <img src="{{ url_for('static', filename='icons/productos.svg') }}" alt="Productos" class="w-7 h-7 filter invert">
    Productos Disponibles
  </h1>
</div>

<!-- Grid de productos -->
<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">

  {% for producto in productos %}
  <div class="bg-black/40 border border-yellow-500 p-5 rounded-2xl shadow-md hover:shadow-xl hover:scale-[1.02] transition transform flex flex-col group text-white">

    <!-- Imagen -->
    {% if producto.imagen %}
    <div class="h-48 flex items-center justify-center mb-4 bg-gray-800 rounded-xl p-2 overflow-hidden">
      <img src="{{ producto.imagen }}"
           class="max-h-full max-w-full object-contain rounded transition group-hover:scale-105">
    </div>
    {% else %}
    <div class="h-48 flex items-center justify-center mb-4 bg-gray-700 text-gray-300 rounded-xl flex-col gap-2">
      <img src="{{ url_for('static', filename='icons/package-search.svg') }}" alt="Sin imagen" class="w-6 h-6 filter invert">
      Sin imagen
    </div>
    {% endif %}

    <!-- Info -->
    <h2 class="text-lg font-semibold text-white mb-1 flex items-center gap-2">
      {{ producto.nombre }}
    </h2>

    <p class="text-gray-200 text-sm flex-1">
      {{ producto.descripcion }}
    </p>

    <!-- Precio y Stock -->
    <div class="mt-3 text-sm space-y-1">
      <p class="flex items-center gap-2 text-gray-200">
        <img src="{{ url_for('static', filename='icons/circle-dollar-sign.svg') }}" alt="Precio" class="h-4 w-4 filter invert" aria-hidden="true">
        <span class="font-semibold">Precio:</span>
        ${{ producto.precio }}
      </p>
      <p class="flex items-center gap-2 text-gray-200">
        <img src="{{ url_for('static', filename='icons/warehouse.svg') }}" alt="Stock" class="h-4 w-4 filter invert" aria-hidden="true">
        <span class="font-semibold">Stock:</span>
        {{ producto.stock }}
      </p>
    </div>

    <!-- Formulario para agregar al carrito -->
    <form action="{{ url_for('productos.agregar_carrito', producto_id=producto.id) }}" method="POST"
          class="flex items-center justify-between mt-4 gap-2">

      <!-- Selector de cantidad -->
      <input type="number" name="cantidad" min="1" max="{{ producto.stock }}" value="1"
             class="w-16 border border-yellow-500 bg-black/60 text-white rounded-lg px-2 py-1 text-center
                    focus:ring-2 focus:ring-yellow-500 focus:outline-none">

      <!-- BotÃ³n carrito -->
      <button type="submit"
              class="flex items-center justify-center bg-purple-600/90 hover:bg-purple-700
                     px-4 py-2 rounded-lg transition transform hover:scale-105 shadow
                     text-white font-semibold text-sm gap-2">
        <img src="{{ url_for('static', filename='icons/cart (2).svg') }}" alt="Carrito" class="w-5 h-5 filter invert">
        <img src="{{ url_for('static', filename='icons/circle-plus.svg') }}" alt="Agregar" class="w-4 h-4 filter invert">
        Agregar
      </button>
    </form>

  </div>
  {% endfor %}

</div>

{% endblock %}